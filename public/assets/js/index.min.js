(()=>{"use strict";function e(e,t){for(var c=0;c<t.length;c++){var r=t[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.products=[],this.selectedProducts=[]}var c,r;return c=t,(r=[{key:"watch",value:function(e){var t=this;this.products=e,this.products.forEach((function(e){return e.addEventListener("click",t.handleProductToggle.bind(t,e))}))}},{key:"deleteSelected",value:function(){var e=this;document.body.style.cursor="progress";var t=this.selectedProducts.map((function(e){return e.dataset.listId}));fetch("http://scandiweb.local/product/delete",{method:"DELETE",body:JSON.stringify(t)}).then((function(t){document.body.style.cursor="default",t.ok?(e.selectedProducts.forEach((function(e){return e.remove()})),e.selectedProducts=[]):console.error("Error sending delete products request.")}))}},{key:"handleProductToggle",value:function(e){var t=this,c=e.querySelector("#checkbox");this.selectedProducts.includes(e)?function(e){c.checked=!1,t.selectedProducts=t.selectedProducts.filter((function(t){return t.dataset.listId!==e.dataset.listId}))}(e):function(e){c.checked=!0,t.selectedProducts.push(e)}(e)}}])&&e(c.prototype,r),t}(),c=document.querySelectorAll("#product"),r=new t;r.watch(c),document.querySelector("#deleteBtn").addEventListener("click",r.deleteSelected.bind(r))})();